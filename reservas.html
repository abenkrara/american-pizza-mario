<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reservar Mesa | American Pizza Mario</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Anton&family=Open+Sans:wght@400;600&display=swap"
        rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: { 'usa-red': '#B22234', 'usa-blue': '#3C3B6E', 'cheese-yellow': '#FFD700', },
                    fontFamily: { 'display': ['Anton', 'sans-serif'], 'body': ['Open Sans', 'sans-serif'], }
                }
            }
        }
    </script>
</head>

<body class="font-body text-gray-800 bg-gray-50 flex flex-col min-h-screen">

    <!-- Navigation -->
    <nav class="bg-white shadow-lg fixed w-full z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-20">
                <div class="flex items-center">
                    <a href="index.html" class="flex-shrink-0 flex items-center gap-2">
                        <img class="h-10 w-auto" src="assets/images/logo.png" alt="Logo">
                        <span
                            class="font-display text-xl text-usa-red tracking-wider uppercase hidden sm:block">American
                            Pizza Mario</span>
                    </a>
                </div>
                <div class="hidden md:flex items-center space-x-8">
                    <a href="index.html"
                        class="text-gray-700 hover:text-usa-red font-bold uppercase transition">Inicio</a>
                    <a href="menu.html" class="text-gray-700 hover:text-usa-red font-bold uppercase transition">La
                        Carta</a>
                    <a href="locations.html"
                        class="text-gray-700 hover:text-usa-red font-bold uppercase transition">Locales</a>
                    <a href="reservas.html"
                        class="bg-usa-red text-white px-5 py-2 rounded-full font-bold transition shadow-md">Reservar
                        Mesa</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="pt-32 pb-12 flex-grow">
        <div class="max-w-2xl mx-auto px-4">
            <div class="bg-white rounded-xl shadow-2xl p-8 border-t-8 border-usa-red">
                <div class="text-center mb-8">
                    <h1 class="text-4xl font-display text-usa-blue mb-2">Reserva tu Mesa</h1>
                    <p class="text-gray-600">Local: <span class="font-bold text-usa-red">Chiva</span> (Máx 6 mesas)</p>
                </div>

                <!-- Success Message -->
                <div id="success-message"
                    class="hidden bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-6 text-center">
                    <i class="fas fa-check-circle text-2xl mb-2"></i>
                    <p class="font-bold text-lg">¡Reserva Confirmada!</p>
                    <p class="mb-4">Hemos enviado un email de confirmación a tu correo.</p>
                </div>

                <!-- Error Message -->
                <div id="error-message"
                    class="hidden bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-6 text-center">
                </div>

                <form id="reservation-form" class="space-y-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-gray-700 font-bold mb-2">Nombre</label>
                            <input type="text" name="name" required
                                class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:border-usa-red"
                                placeholder="Tu nombre">
                        </div>
                        <div>
                            <label class="block text-gray-700 font-bold mb-2">Teléfono</label>
                            <input type="tel" name="phone" required
                                class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:border-usa-red"
                                placeholder="600 000 000">
                        </div>
                    </div>

                    <div>
                        <label class="block text-gray-700 font-bold mb-2">Email (para confirmación)</label>
                        <input type="email" name="email" required
                            class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:border-usa-red"
                            placeholder="ejemplo@email.com">
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div>
                            <label class="block text-gray-700 font-bold mb-2">Fecha</label>
                            <input type="date" name="date" required id="date-input"
                                class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:border-usa-red">
                        </div>
                        <div>
                            <label class="block text-gray-700 font-bold mb-2">Hora</label>
                            <select name="time" required
                                class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:border-usa-red">
                                <option value="17:30">17:30</option>
                                <option value="18:00">18:00</option>
                                <option value="18:30">18:30</option>
                                <option value="19:00">19:00</option>
                                <option value="19:30">19:30</option>
                                <option value="20:00">20:00</option>
                                <option value="20:30">20:30</option>
                                <option value="21:00">21:00</option>
                                <option value="21:30">21:30</option>
                                <option value="22:00">22:00</option>
                                <option value="22:30">22:30</option>
                                <option value="23:00">23:00</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-gray-700 font-bold mb-2">Personas</label>
                            <input type="number" name="pax" min="1" max="10" value="2" required
                                class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:border-usa-red">
                        </div>
                    </div>

                    <div class="pt-4">
                        <button type="submit"
                            class="w-full bg-usa-blue text-white font-bold py-3 rounded-lg hover:bg-gray-800 transition transform hover:scale-[1.02]">
                            Confirmar Reserva
                        </button>
                    </div>
                </form>

                <p class="text-xs text-center text-gray-500 mt-6">* Al reservar aceptas recibir comunicaciones sobre tu
                    mesa.</p>
            </div>
        </div>
    </div>

    <!-- Script -->
    <script src="scripts/reservations.js"></script>
    <script>
        // Set Min Date to Today
        const dateInput = document.getElementById('date-input');
        dateInput.min = new Date().toISOString().split('T')[0];

        document.getElementById('reservation-form').addEventListener('submit', async function (e) {
            e.preventDefault();

            const formData = new FormData(this);
            const data = {
                name: formData.get('name'),
                phone: formData.get('phone'),
                email: formData.get('email'),
                date: formData.get('date'),
                time: formData.get('time'),
                pax: formData.get('pax')
            };

            // Loading state
            const btn = this.querySelector('button[type="submit"]');
            const originalText = btn.textContent;
            btn.disabled = true;
            btn.textContent = "Procesando...";

            const result = await reservationSystem.addBooking(data);

            btn.disabled = false;
            btn.textContent = originalText;

            if (result.success) {
                document.getElementById('success-message').classList.remove('hidden');
                document.getElementById('error-message').classList.add('hidden');
                this.reset();
                window.scrollTo(0, 0);
            } else {
                const errorDiv = document.getElementById('error-message');
                errorDiv.textContent = result.message;
                errorDiv.classList.remove('hidden');
                document.getElementById('success-message').classList.add('hidden');
                window.scrollTo(0, 0);
            }
        });
    </script>
</body>

</html>